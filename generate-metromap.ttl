# baseURI: https://architecture.politie.nl/metromap/generate
# imports: http://metro.politie.nl
# imports: http://simplearchimatemodel.politie.nl/
# imports: http://simplearchimatemodel.politie.nl/instances
# imports: http://spinrdf.org/spl
# prefix: generate

@prefix generate: <https://architecture.politie.nl/metromap/generate#> .
@prefix instance: <https:///architecture.politie.nl/metromap/instance#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sam: <http://simplearchimatemodel.politie.nl/> .
@prefix sami: <http://simplearchimatemodel.politie.nl/instances> .
@prefix sm: <http://topbraid.org/sparqlmotion#> .
@prefix smf: <http://topbraid.org/sparqlmotionfunctions#> .
@prefix sml: <http://topbraid.org/sparqlmotionlib#> .
@prefix sp: <http://spinrdf.org/sp#> .
@prefix spin: <http://spinrdf.org/spin#> .
@prefix spl: <http://spinrdf.org/spl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

sam:BB
  spin:rule [
      a sp:Construct ;
      sp:templates (
          [
            sp:object <http://metro.politie.nl#S> ;
            sp:predicate rdf:type ;
            sp:subject [
                sp:varName "i" ;
              ] ;
          ]
          [
            sp:object <http://metro.politie.nl#L> ;
            sp:predicate rdf:type ;
            sp:subject [
                sp:varName "sbb" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "i" ;
              ] ;
            sp:predicate <http://metro.politie.nl#T> ;
            sp:subject [
                sp:varName "sbb" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "sbb" ;
              ] ;
            sp:predicate <http://metro.politie.nl#T> ;
            sp:subject [
                sp:varName "i2" ;
              ] ;
          ]
        ) ;
      sp:where (
          [
            sp:object [
                sp:varName "abb" ;
              ] ;
            sp:predicate sam:R ;
            sp:subject [
                sp:varName "sbb" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "i" ;
              ] ;
            sp:predicate sam:A ;
            sp:subject [
                sp:varName "abb" ;
              ] ;
          ]
          [
            sp:object sam:I ;
            sp:predicate rdf:type ;
            sp:subject [
                sp:varName "i" ;
              ] ;
          ]
          [
            a sp:Optional ;
            sp:elements (
                [
                  sp:object [
                      sp:varName "i" ;
                    ] ;
                  sp:predicate sam:D ;
                  sp:subject [
                      sp:varName "i2" ;
                    ] ;
                ]
              ) ;
          ]
        ) ;
      rdfs:comment "0002 metromap" ;
    ] ;
.
sam:C
  spin:rule [
      a sp:Construct ;
      sp:templates (
          [
            sp:object sam:ABB ;
            sp:predicate rdf:type ;
            sp:subject [
                sp:varName "abb" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "abbLabel" ;
              ] ;
            sp:predicate rdfs:label ;
            sp:subject [
                sp:varName "abb" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "i" ;
              ] ;
            sp:predicate sam:A ;
            sp:subject [
                sp:varName "abb" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "s" ;
              ] ;
            sp:predicate sam:A ;
            sp:subject [
                sp:varName "abb" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "f" ;
              ] ;
            sp:predicate sam:A ;
            sp:subject [
                sp:varName "abb" ;
              ] ;
          ]
          [
            sp:object sam:SBB ;
            sp:predicate rdf:type ;
            sp:subject [
                sp:varName "sbb" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "sbbLabel" ;
              ] ;
            sp:predicate rdfs:label ;
            sp:subject [
                sp:varName "sbb" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "c" ;
              ] ;
            sp:predicate sam:A ;
            sp:subject [
                sp:varName "sbb" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "c2" ;
              ] ;
            sp:predicate sam:A ;
            sp:subject [
                sp:varName "sbb" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "abb" ;
              ] ;
            sp:predicate sam:R ;
            sp:subject [
                sp:varName "sbb" ;
              ] ;
          ]
        ) ;
      sp:where (
          [
            sp:object [
                sp:varName "f" ;
              ] ;
            sp:predicate sam:X ;
            sp:subject [
                sp:varName "c" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "cLabel" ;
              ] ;
            sp:predicate rdfs:label ;
            sp:subject [
                sp:varName "c" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "s" ;
              ] ;
            sp:predicate sam:R ;
            sp:subject [
                sp:varName "f" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "sLabel" ;
              ] ;
            sp:predicate rdfs:label ;
            sp:subject [
                sp:varName "s" ;
              ] ;
          ]
          [
            sp:object [
                sp:varName "i" ;
              ] ;
            sp:predicate sam:T ;
            sp:subject [
                sp:varName "f" ;
              ] ;
          ]
          [
            a sp:Optional ;
            sp:elements (
                [
                  sp:object [
                      sp:varName "c2" ;
                    ] ;
                  sp:predicate sam:V ;
                  sp:subject [
                      sp:varName "c" ;
                    ] ;
                ]
              ) ;
          ]
          [
            a sp:Bind ;
            sp:expression [
                a sp:concat ;
                sp:arg1 "SBB: " ;
                sp:arg2 [
                    sp:varName "sLabel" ;
                  ] ;
                sp:arg3 " " ;
                sp:arg4 [
                    sp:varName "cLabel" ;
                  ] ;
              ] ;
            sp:variable [
                sp:varName "sbbLabel" ;
              ] ;
          ]
          [
            a sp:Bind ;
            sp:expression [
                a sp:concat ;
                sp:arg1 "ABB: " ;
                sp:arg2 [
                    sp:varName "sLabel" ;
                  ] ;
              ] ;
            sp:variable [
                sp:varName "abbLabel" ;
              ] ;
          ]
          [
            a sp:Bind ;
            sp:expression [
                a sp:iri ;
                sp:arg1 [
                    a sp:concat ;
                    sp:arg1 "http://archimate.politie.nl/instances/ABB-" ;
                    sp:arg2 [
                        sp:varName "sLabel" ;
                      ] ;
                  ] ;
              ] ;
            sp:variable [
                sp:varName "abb" ;
              ] ;
          ]
          [
            a sp:Bind ;
            sp:expression [
                a sp:iri ;
                sp:arg1 [
                    a sp:concat ;
                    sp:arg1 "http://archimate.politie.nl/instances/SBB-" ;
                    sp:arg2 [
                        sp:varName "sLabel" ;
                      ] ;
                    sp:arg3 "-" ;
                    sp:arg4 [
                        sp:varName "cLabel" ;
                      ] ;
                  ] ;
              ] ;
            sp:variable [
                sp:varName "sbb" ;
              ] ;
          ]
        ) ;
      rdfs:comment "0001 Aanmaken Building Blocks" ;
    ] ;
.

<https://architecture.politie.nl/metromap/generate>
  a owl:Ontology ;
  owl:imports <http://metro.politie.nl> ;
  owl:imports sam: ;
  owl:imports sam:instances ;
  owl:imports <http://spinrdf.org/spl> ;
.
